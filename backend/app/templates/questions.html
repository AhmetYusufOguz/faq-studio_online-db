<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Son 100 Soru</title>
  <style>
    body{font-family:system-ui,Arial,sans-serif;max-width:1000px;margin:24px auto;color:#eaeaea;background:#111}
    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid #333;padding:8px;vertical-align:top}
    th{background:#1b1b1b}
    tr:nth-child(even){background:#161616}
    a{color:#7cc}
  </style>
</head>
<body>
  <h2>Son 100 Soru</h2>
  <table>
    <thead><tr><th>ID</th><th>Soru</th><th>Kategori</th><th>Oluşturma</th></tr></thead>
    <tbody>
      {% for r in rows %}
        <tr>
          <td>{{ r.id }}</td>
          <td>{{ r.question }}</td>
          <td>{{ r.category }}</td>
          <td>{{ r.created_at }}</td>
          <td>
            <button onclick="confirmDelete({{ r.id }})">Sil</button>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
</body>
</html>

<script>
function confirmDelete(id) {
    if (!confirm("Bu soruyu silmek istediğinize emin misiniz?")) return;

    fetch(`/questions/${id}`, { method: 'DELETE' })
        .then(res => {
            if (!res.ok) throw new Error("Silme hatası");
            return res.json();
        })
        .then(data => {
            alert("Soru silindi!");
            location.reload(); // sayfayı yenile
        })
        .catch(err => alert(err));
}
</script>
